<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<th:block layout:fragment="content">
	 <div class="row mt-5">
		<div class="col-2">
			
			<th:block th:replace="~{member/mypage_menu::menu}"></th:block>
			
		</div>

	<div class="col-10">
	    <h2 class="mt-4 mb-4 text-center">비밀번호 변경</h2>
	
	    <div class="row justify-content-center">
	        <div class="col-md-10">
	            <div class="card card-info">
	                <div class="card-header">
	                    <h3 class="card-title">비밀번호 변경</h3>
	                </div>
	
	                <form method="post" action="/member/pwchange" id="pwChangeForm">
	                    <div class="card-body">
	
	                        <!-- 기존 비밀번호 -->
	                        <div class="row mb-3">
	                            <div class="col-md-6">
	                                <label for="cur_pw" class="form-label">기존 비밀번호</label>
	                                <input type="password" class="form-control" id="cur_pw" name="cur_pw" required>
	                            </div>
	                        </div>
	
	                        <!-- 새 비밀번호 -->
	                        <div class="row mb-3">
	                            <div class="col-md-6">
	                                <label for="new_pw" class="form-label">신규 비밀번호</label>
	                                <input type="password" class="form-control" id="new_pw" name="new_pw" required>
	                            </div>
	                        </div>
	
	                        <!-- 비밀번호 확인 -->
	                        <div class="row mb-3">
	                            <div class="col-md-6">
	                                <label for="confirm_pw" class="form-label">비밀번호 확인</label>
	                                <input type="password" class="form-control" id="confirm_pw" name="confirm_pw" required>
	                            </div>
	                        </div>
	
	                    </div>
	
	                    <!-- 버튼 -->
	                    <div class="card-footer text-center">
	                        <button type="button" class="btn btn-secondary" id="btn_pwchange">비밀번호 변경</button>
	                    </div>
	             	   </form>
		            </div>
		        </div>
		    </div>
	    </div>
    </div>
</th:block>

<th:block layout:fragment="script2">
<script th:inline="javascript">
	
	$(document).ready(function() {
		
	// 비밀번호 변경하기(로그인상태) . id="btn_pwchange"
		$("#btn_pwchange").on("click", function() {

			$.ajax({
				url : '/member/pwchange',
				type: 'post',
				data : {cur_pw : $("#cur_pw").val() , new_pw : $("#new_pw").val()}, // 자바스크립트 Object문법
				dataType: 'text',
				success : function(result) {
					if(result == "success") {
						alert("비밀번호가 변경되었습니다.");
					}else if(result == "fail") {
						alert("현재 비밀번호를 확인하세요.");
					}
					$("#cur_pw").val(""); // 현재비번 지우기
					$("#new_pw").val(""); // 신규비번 지우기
					$("#confirm_pw").val(""); // 신규비번 지우기
				}
			});
		});

	});
</script>
</th:block>
</html>

































